<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<f:metadata>
    <f:viewParam name="incidentId" value="#{workIncidentBean.incidentIdToModify}" />
    <f:event type="preRenderView" listener="#{workIncidentBean.loadModifiedIncident}" />
</f:metadata>

<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>Modify Incident</title>
	<!-- Bootstrap CSS -->
	<link rel="stylesheet"
		href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
		integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
		crossorigin="anonymous" />
</h:head>

<h:body class="bg-light">
	<ui:include src="/shared/header.xhtml" />

	<div class="container mt-5">
		<h:form id="addIncidentForm">
			<h2 class="mb-4">Modify Incident</h2>

			<p:messages id="messages" showDetail="true" />

			<div class="form-group row">
				<label class="col-sm-2 col-form-label">Title:</label>
				<div class="col-sm-10">
					<h:inputText id="title"
						value="#{workIncidentBean.newIncident.title}" class="form-control"
						required="true" />
					<h:message for="title" styleClass="error-message" />
				</div>
			</div>

			<div class="form-group row">
				<label class="col-sm-2 col-form-label">Description:</label>
				<div class="col-sm-10">
					<h:inputTextarea id="description"
						value="#{workIncidentBean.newIncident.description}"
						class="form-control" rows="5" cols="30" required="true" />
					<h:message for="description" styleClass="error-message" />
				</div>
			</div>

			<div class="form-group row">
				<label class="col-sm-2 col-form-label">Department:</label>
				<div class="col-sm-10">
					<h:inputText id="department"
						value="#{workIncidentBean.newIncident.department}"
						class="form-control" required="true" />
					<h:message for="department" styleClass="error-message" />
				</div>
			</div>

			<div class="form-group row">
				<label class="col-sm-2 col-form-label">Reported By:</label>
				<div class="col-sm-10">
					<h:inputText id="reportedBy"
						value="#{workIncidentBean.newIncident.reportedBy}"
						class="form-control" required="true" />
					<h:message for="reportedBy" styleClass="error-message" />

				</div>
			</div>

			<div class="form-group row">
				<label class="col-sm-2 col-form-label">Date Resolved:</label>
				<div class="col-sm-10">
					<!-- Input field for dateResolved -->
					<h:inputText id="dateResolved"
						value="#{workIncidentBean.newIncident.dateResolved}"
						class="form-control datepicker" required="true">
						<f:convertDateTime pattern="yyyy-MM-dd" />
					</h:inputText>
					<h:message for="dateResolved" styleClass="error-message" />


				</div>
			</div>

			<div class="form-group row">
				<label class="col-sm-2 col-form-label">Resolution:</label>
				<div class="col-sm-10">
					<h:inputText id="resolution"
						value="#{workIncidentBean.newIncident.resolution}"
						class="form-control" />
				</div>
			</div>

			<div class="form-group row">
				<label class="col-sm-2 col-form-label">Status:</label>
				<div class="col-sm-10">
					<h:inputText id="status"
						value="#{workIncidentBean.newIncident.status}"
						class="form-control" />
				</div>
			</div>
			<!-- Add more fields as needed -->

			<div class="form-group row">
				<div class="col-sm-10 offset-sm-2">
					<h:commandButton value="Save Incident"
						action="#{workIncidentBean.saveModifiedIncident}" update="messages"
						class="btn btn-primary" />
					<a href="dashboard.xhtml" class="btn btn-secondary">Cancel</a>


				</div>
			</div>
		</h:form>
	</div>

	<!-- Bootstrap JS and Popper.js -->
	<!-- Bootstrap JS and Popper.js -->
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
		integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
		crossorigin="anonymous"></script>
	<script
		src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
		integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
		crossorigin="anonymous"></script>
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
		integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
		crossorigin="anonymous"></script>
	<!-- Include Bootstrap Datepicker CSS and JavaScript from CDN -->
	<link rel="stylesheet"
		href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css" />
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>

	<!-- Bootstrap Datepicker script -->
	<script>
		$(document).ready(function() {
			$('.datepicker').datepicker({
				format : 'yyyy-mm-dd',
				autoclose : true
			});
		});
	</script>
</h:body>

</html>